/**
*******************************************************************************
* @file           : app.c
* @brief          : 
* @author         : 
* @date           : 18/01/2023
*******************************************************************************
* @attention
*
* Copyright (c) 18/01/2023 Abelardo Cuffia S.A. All rights reserved.
*
*/
/******************************************************************************
    Includes
******************************************************************************/
#include <stdbool.h>

#include "os.h"
#include "hal.h"
#include "task_0.h"
#include "task_1.h"
#include "task_diag.h"

/******************************************************************************
    Defines and constants
******************************************************************************/

/******************************************************************************
    Data types
******************************************************************************/

/******************************************************************************
    Local variables
******************************************************************************/

/******************************************************************************
    Local function prototypes
******************************************************************************/

/******************************************************************************
    Local function definitions
******************************************************************************/

/******************************************************************************
    Public function definitions
******************************************************************************/

void app_run(void)
{
    //Init HAL
    hal_init();

	//Init OS
	os_init();

	//Init tasks
	task_0_init();
	task_1_init();
	task_diag_init();

	//Add tasks to scheduler
	os_add_task(task_0_run, 0, 1000);
	os_add_task(task_1_run, 0, 1000);
	os_add_task(task_diag_run, 0, 1000);

	while(true)
	{
		//Call OS dispatcher
		os_dispatcher();
	}
}


